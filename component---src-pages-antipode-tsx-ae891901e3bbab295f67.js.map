{"version":3,"file":"component---src-pages-antipode-tsx-ae891901e3bbab295f67.js","mappings":"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","sources":["webpack://steebe.dev/./src/components/widgets/antipodeWidget.tsx","webpack://steebe.dev/./src/components/widgets/widget.tsx","webpack://steebe.dev/./src/pages/antipode.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { GoogleMap, useJsApiLoader } from \"@react-google-maps/api\";\nimport Widget from \"./widget\";\n\nconst MAP_CONTAINER_STYLE = { width: \"100%\", height: \"350px\" };\nconst DEFAULT_CENTER: google.maps.LatLngLiteral = { lat: 20, lng: 0 };\nconst DEFAULT_ZOOM = 2;\nconst ZOOMED_IN = 5;\nconst LIBRARIES: [\"marker\"] = [\"marker\"];\nconst TITLE = \"dig to China!\";\n\nconst toAntipode = (lat: number, lng: number): google.maps.LatLngLiteral => ({\n  lat: -lat,\n  lng: lng > 0 ? lng - 180 : lng + 180,\n});\n\nconst formatCoordinates = (lat: number, lng: number): string => {\n  const latDir = lat >= 0 ? \"N\" : \"S\";\n  const lngDir = lng >= 0 ? \"E\" : \"W\";\n  return `${Math.abs(lat).toFixed(2)}°${latDir}, ${Math.abs(lng).toFixed(2)}°${lngDir}`;\n};\n\nconst AntipodeWidget = () => {\n  const [mounted, setMounted] = useState(false);\n  const [origin, setOrigin] = useState<google.maps.LatLngLiteral | null>(null);\n  const [antipode, setAntipode] = useState<google.maps.LatLngLiteral | null>(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const mapRef = useRef<google.maps.Map | null>(null);\n  const originMarkerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(null);\n  const antipodeMarkerRef = useRef<google.maps.marker.AdvancedMarkerElement | null>(null);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const { isLoaded } = useJsApiLoader({\n    id: \"google-map-script\",\n    googleMapsApiKey: process.env.GATSBY_GOOGLE_MAPS_API_KEY ?? \"\",\n    libraries: LIBRARIES,\n  });\n\n  const onLoad = useCallback((map: google.maps.Map) => {\n    mapRef.current = map;\n  }, []);\n\n  const onUnmount = useCallback(() => {\n    if (originMarkerRef.current) originMarkerRef.current.map = null;\n    if (antipodeMarkerRef.current) antipodeMarkerRef.current.map = null;\n    mapRef.current = null;\n  }, []);\n\n  const placeMarker = useCallback(\n    (\n      position: google.maps.LatLngLiteral,\n      markerRef: React.MutableRefObject<google.maps.marker.AdvancedMarkerElement | null>,\n    ) => {\n      if (markerRef.current) {\n        markerRef.current.map = null;\n      }\n      markerRef.current = new google.maps.marker.AdvancedMarkerElement({\n        map: mapRef.current,\n        position,\n      });\n    },\n    [],\n  );\n\n  const animateToAntipode = useCallback((destination: google.maps.LatLngLiteral) => {\n    const map = mapRef.current;\n    if (!map) return;\n    setIsAnimating(true);\n    map.setZoom(2);\n    setTimeout(() => {\n      map.panTo(destination);\n      setTimeout(() => {\n        map.setZoom(ZOOMED_IN);\n        setIsAnimating(false);\n      }, 1500);\n    }, 800);\n  }, []);\n\n  const onMapClick = useCallback(\n    (e: google.maps.MapMouseEvent) => {\n      if (isAnimating || !e.latLng) return;\n      const lat = e.latLng.lat();\n      const lng = e.latLng.lng();\n      const newOrigin = { lat, lng };\n      const newAntipode = toAntipode(lat, lng);\n      setOrigin(newOrigin);\n      setAntipode(newAntipode);\n      placeMarker(newOrigin, originMarkerRef);\n      placeMarker(newAntipode, antipodeMarkerRef);\n      animateToAntipode(newAntipode);\n    },\n    [isAnimating, placeMarker, animateToAntipode],\n  );\n\n  const handleReset = useCallback(() => {\n    if (originMarkerRef.current) {\n      originMarkerRef.current.map = null;\n      originMarkerRef.current = null;\n    }\n    if (antipodeMarkerRef.current) {\n      antipodeMarkerRef.current.map = null;\n      antipodeMarkerRef.current = null;\n    }\n    setOrigin(null);\n    setAntipode(null);\n    mapRef.current?.setCenter(DEFAULT_CENTER);\n    mapRef.current?.setZoom(DEFAULT_ZOOM);\n  }, []);\n\n  const antipodeLink =\n    typeof window !== \"undefined\" && window.location.pathname !== \"/antipode\"\n      ? \"/antipode\"\n      : undefined;\n\n  if (!mounted || !isLoaded) {\n    return <Widget title={TITLE}>Loading map...</Widget>;\n  }\n\n  return (\n    <Widget title={TITLE} to={antipodeLink}>\n      <p style={{ margin: \"0 0 0.75rem\", fontSize: \"0.85rem\" }}>\n        {isAnimating\n          ? \"Travelling to the antipode...\"\n          : origin\n            ? `Origin: ${formatCoordinates(origin.lat, origin.lng)}`\n            : \"Click anywhere on the map to find its antipode.\"}\n      </p>\n      {antipode && !isAnimating && (\n        <p style={{ margin: \"0 0 0.75rem\", fontSize: \"0.85rem\" }}>\n          Antipode: {formatCoordinates(antipode.lat, antipode.lng)}\n        </p>\n      )}\n      <GoogleMap\n        mapContainerStyle={MAP_CONTAINER_STYLE}\n        center={DEFAULT_CENTER}\n        zoom={DEFAULT_ZOOM}\n        onClick={onMapClick}\n        onLoad={onLoad}\n        onUnmount={onUnmount}\n        options={{\n          gestureHandling: \"cooperative\",\n          clickableIcons: false,\n          mapId: \"DEMO_MAP_ID\",\n          draggableCursor: \"crosshair\",\n          draggingCursor: \"grabbing\",\n        }}\n      />\n      {origin && !isAnimating && (\n        <button\n          onClick={handleReset}\n          style={{\n            marginTop: \"0.75rem\",\n            padding: \"0.5rem 1.25rem\",\n            fontSize: \"0.85rem\",\n            fontFamily: \"inherit\",\n            backgroundColor: \"#2f4f4f\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"4px\",\n            cursor: \"pointer\",\n          }}\n        >\n          Reset\n        </button>\n      )}\n    </Widget>\n  );\n};\n\nexport default AntipodeWidget;\n","import React from \"react\";\nimport { Link } from \"gatsby\";\nimport { OutboundLink } from \"gatsby-plugin-google-gtag\";\n\ninterface WidgetProps {\n  children: React.ReactNode;\n  title?: string;\n  to?: string;\n  url?: string;\n}\n\nconst Widget: React.FC<WidgetProps> = ({ children, title, to, url }) => {\n  const titleContent = title && (\n    <h2 style={{ marginTop: 0, marginBottom: \"1rem\", textAlign: \"left\" }}>\n      {to ? (\n        <Link to={to}>{title}</Link>\n      ) : url ? (\n        <OutboundLink href={url} target=\"_blank\" rel=\"noreferrer\">\n          {title}\n        </OutboundLink>\n      ) : (\n        title\n      )}\n    </h2>\n  );\n\n  return (\n    <div style={{ border: \"1px solid black\", padding: \"1rem\" }}>\n      {titleContent}\n      {children}\n    </div>\n  );\n};\n\nexport default Widget;\n","import React from \"react\";\nimport Layout from \"../components/layout/layout\";\nimport AntipodeWidget from \"../components/widgets/antipodeWidget\";\n\nconst Antipode = () => {\n  return (\n    <Layout>\n      <div>\n        <p>\n          I dug many a hole in my childhood. In the first house I grew up in, our next door neighbor\n          gave us neighborhood kids full exploration and resource rights to the land behind their\n          garage. Essential fossil expeditions, sacred ritual burials, and experimental manmade pond\n          operations commenced weekly. It was behind that garage that I first heard the phrase:\n        </p>\n        <p>\n          <b>&quot;What are you doing, digging to China?&quot;</b>\n        </p>\n        <p>\n          Since that day, I can&apos;t help but daydream of the opportunity of meeting an\n          adventurous stranger on the other end of my shovel some day. Until that day comes,\n          I&apos;ll simply offer myself a place to end up at any antipode of my choosing.\n        </p>\n        <AntipodeWidget />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Antipode;\n"],"names":["MAP_CONTAINER_STYLE","width","height","DEFAULT_CENTER","lat","lng","LIBRARIES","TITLE","formatCoordinates","latDir","lngDir","Math","abs","toFixed","AntipodeWidget","_process$env$GATSBY_G","mounted","setMounted","useState","origin","setOrigin","antipode","setAntipode","isAnimating","setIsAnimating","mapRef","useRef","originMarkerRef","antipodeMarkerRef","useEffect","isLoaded","useJsApiLoader","id","googleMapsApiKey","process","libraries","onLoad","useCallback","map","current","onUnmount","placeMarker","position","markerRef","google","maps","marker","AdvancedMarkerElement","animateToAntipode","destination","setZoom","setTimeout","panTo","onMapClick","e","latLng","newOrigin","newAntipode","toAntipode","handleReset","_mapRef$current","_mapRef$current2","setCenter","antipodeLink","window","location","pathname","undefined","React","Widget","title","to","style","margin","fontSize","GoogleMap","mapContainerStyle","center","zoom","onClick","options","gestureHandling","clickableIcons","mapId","draggableCursor","draggingCursor","marginTop","padding","fontFamily","backgroundColor","color","border","borderRadius","cursor","_ref","children","url","titleContent","marginBottom","textAlign","Link","OutboundLink","href","target","rel","Antipode","Layout"],"sourceRoot":""}