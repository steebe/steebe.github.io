"use strict";(self.webpackChunksteebe_dev=self.webpackChunksteebe_dev||[]).push([[876],{5999:function(e,n,t){t.d(n,{bE:function(){return a},p6:function(){return l}});var l="lines-module--date--99f4f",a="lines-module--post--c3f31"},8453:function(e,n,t){t.d(n,{RP:function(){return r}});var l=t(6540);const a=l.createContext({});function r(e){const n=l.useContext(a);return l.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}},9871:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var l=t(8453),a=t(6540);function r(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",em:"em",ul:"ul",li:"li",code:"code",strong:"strong",h4:"h4",ol:"ol",pre:"pre",hr:"hr",a:"a",h5:"h5"},(0,l.RP)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.h1,null,"It's Not Me, It's You"),"\n",a.createElement(n.p,null,"For context, back in 2021 I decided to switch my site from vanilla HTML + CSS (with a Jekyll blog under one path)\nto a Gatsby site."),"\n",a.createElement(n.h2,null,"The Appeal"),"\n",a.createElement(n.p,null,"Our front-end team at work became pretty stacked, and I generally only tapped in to commit build, infra, or\nrepository hygiene updates. I was craving being able to touch React. I'd stumbled upon Hugo and Gatsby, wanted to\ntinker. Ultimately, Gatsby ",a.createElement(n.em,null,"seemed")," the most approachable of the two. Translation: its marketing worked on me."),"\n",a.createElement(n.p,null,"At first, after adopting it, I thought that I just was rusty in the front-end space. I thought it was reasonable\nthat I spent more time digging through the four different doc sets required to get started and up and running than I\ndid writing React code or CSS."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Official Gatsby guides (to know what to do to rewrite my site with Gatsby)"),"\n",a.createElement(n.li,null,"Adjacent Gatsby references that the guides frequently link to (because I guess their official guides often\nneed supplemental help, and perhaps different Gatsby contributors had different ideas on how to structure docs?)"),"\n",a.createElement(n.li,null,"Gatsby plugin homepages/documentation (because Gatbsy seems to have thought federated was the way to go for\ncore site generator capabilities)"),"\n",a.createElement(n.li,null,"Front-end tooling documentation (because I am now supporting a React app to write personal website updates)"),"\n"),"\n",a.createElement(n.p,null,"That's because, at some points, it felt kind of intruiging! I wasn't stuck hacking at HTML and CSS, I was spending\nmy time \"coding\"! Everything is smooth and simple in the end, after my first build with CI/CD:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"To make blog posts, I write a new ",a.createElement(n.code,null,".mdx"),", push, et. voila!"),"\n",a.createElement(n.li,null,"To make site updates, I write React relatively quickly, push, et. voila!"),"\n",a.createElement(n.li,null,a.createElement(n.em,null,a.createElement(n.strong,null,"To keep the site safe and up-to-date, I watch for ",a.createElement(n.code,null,"npm")," warnings, errors, or security flaws"))),"\n"),"\n",a.createElement(n.h2,null,"The Downfall"),"\n",a.createElement(n.p,null,"Two years later, and that last bullet is killing me. Every time I sit down to upgrade all things Gatsby, I find myself\nin an annoying sinkhole of problems introduced by the framework itself. The latest snafu is what put the final nail in the\ncoffin."),"\n",a.createElement(n.h4,null,"Updating from one minor version to another"),"\n",a.createElement(n.p,null,"It should be this easy:"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"Update Gatsby and its plugins"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ npm update gatsby \\\n           gatsby-plugin-google-gtag \\\n           gatsby-plugin-image \\\n           gatsby-plugin-mdx \\\n           gatsby-plugin-sharp \\\n           gatsby-remark-images \\\n           gatsby-source-filesystem\n")),"\n",a.createElement(n.hr),"\n",a.createElement(n.ol,{start:"2"},"\n",a.createElement(n.li,null,"Update my toolchain"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ npm update -D eslint \\\n              eslint-config-prettier \\\n              eslint-plugin-prettier \\\n              eslint-plugin-react \\\n              prettier \\\n              typescript \\\n              @typescript-eslint/eslint-plugin \\\n              @typescript-eslint/parser\n")),"\n",a.createElement(n.p,null,"Neither of these commands work while Gatsby was pinned to ",a.createElement(n.code,null,"5.5.0"),", and while all other dependencies at least\na minor version behind. Okay, I guess that's not the end of the world. But why won't they work? Because\nGatsby's core library has conflicting dev dependencies, so their developers are happy. Okay, I still\nunderstand. I will update by hand."),"\n",a.createElement(n.hr),"\n",a.createElement(n.ol,{start:"3"},"\n",a.createElement(n.li,null,"Update ",a.createElement(n.code,null,"package.json")," with entirely new version numbers for everything, and ",a.createElement(n.code,null,"npm i")),"\n"),"\n",a.createElement(n.p,null,"lol"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'npm WARN ERESOLVE overriding peer dependency\nnpm WARN While resolving: eslint-config-react-app@6.0.0\nnpm WARN Found: @typescript-eslint/eslint-plugin@5.62.0\nnpm WARN node_modules/gatsby/node_modules/@typescript-eslint/eslint-plugin\nnpm WARN   @typescript-eslint/eslint-plugin@"^5.60.1" from gatsby@5.13.0\nnpm WARN   node_modules/gatsby\nnpm WARN     gatsby@"^5.13.0" from the root project\nnpm WARN     10 more (babel-plugin-remove-graphql-queries, ...)\nnpm WARN \nnpm WARN Could not resolve dependency:\nnpm WARN peer @typescript-eslint/eslint-plugin@"^4.0.0" from eslint-config-react-app@6.0.0\nnpm WARN node_modules/gatsby/node_modules/eslint-config-react-app\nnpm WARN   eslint-config-react-app@"^6.0.0" from gatsby@5.13.0\nnpm WARN   node_modules/gatsby\nnpm WARN \nnpm WARN Conflicting peer dependency: @typescript-eslint/eslint-plugin@4.33.0\nnpm WARN node_modules/@typescript-eslint/eslint-plugin\nnpm WARN   peer @typescript-eslint/eslint-plugin@"^4.0.0" from eslint-config-react-app@6.0.0\nnpm WARN   node_modules/gatsby/node_modules/eslint-config-react-app\nnpm WARN     eslint-config-react-app@"^6.0.0" from gatsby@5.13.0\nnpm WARN     node_modules/gatsby\nnpm WARN ERESOLVE overriding peer dependency\nnpm WARN While resolving: eslint-config-react-app@6.0.0\nnpm WARN Found: @typescript-eslint/parser@5.62.0\nnpm WARN node_modules/gatsby/node_modules/@typescript-eslint/parser\nnpm WARN   @typescript-eslint/parser@"^5.60.1" from gatsby@5.13.0\nnpm WARN   node_modules/gatsby\nnpm WARN     gatsby@"^5.13.0" from the root project\nnpm WARN     10 more (babel-plugin-remove-graphql-queries, ...)\nnpm WARN   1 more (@typescript-eslint/eslint-plugin)\nnpm WARN \nnpm WARN Could not resolve dependency:\nnpm WARN peer @typescript-eslint/parser@"^4.0.0" from eslint-config-react-app@6.0.0\nnpm WARN node_modules/gatsby/node_modules/eslint-config-react-app\nnpm WARN   eslint-config-react-app@"^6.0.0" from gatsby@5.13.0\nnpm WARN   node_modules/gatsby\nnpm WARN \nnpm WARN Conflicting peer dependency: @typescript-eslint/parser@4.33.0\nnpm WARN node_modules/@typescript-eslint/parser\nnpm WARN   peer @typescript-eslint/parser@"^4.0.0" from eslint-config-react-app@6.0.0\nnpm WARN   node_modules/gatsby/node_modules/eslint-config-react-app\nnpm WARN     eslint-config-react-app@"^6.0.0" from gatsby@5.13.0\nnpm WARN     node_modules/gatsby\nnpm WARN ERESOLVE overriding peer dependency\nnpm WARN While resolving: react-server-dom-webpack@0.0.0-experimental-c8b778b7f-20220825\nnpm WARN Found: react@18.2.0\nnpm WARN node_modules/react\nnpm WARN   react@"^18.2.0" from the root project\nnpm WARN   10 more (@gatsbyjs/reach-router, @mdx-js/react, gatsby, ...)\nnpm WARN \nnpm WARN Could not resolve dependency:\nnpm WARN peer react@"0.0.0-experimental-c8b778b7f-20220825" from react-server-dom-webpack@0.0.0-experimental-c8b778b7f-20220825\nnpm WARN node_modules/gatsby/node_modules/react-server-dom-webpack\nnpm WARN   react-server-dom-webpack@"0.0.0-experimental-c8b778b7f-20220825" from gatsby@5.13.0\nnpm WARN   node_modules/gatsby\nnpm WARN \nnpm WARN Conflicting peer dependency: react@0.0.0-experimental-c8b778b7f-20220825\nnpm WARN node_modules/react\nnpm WARN   peer react@"0.0.0-experimental-c8b778b7f-20220825" from react-server-dom-webpack@0.0.0-experimental-c8b778b7f-20220825\nnpm WARN   node_modules/gatsby/node_modules/react-server-dom-webpack\nnpm WARN     react-server-dom-webpack@"0.0.0-experimental-c8b778b7f-20220825" from gatsby@5.13.0\nnpm WARN     node_modules/gatsby\n')),"\n",a.createElement(n.p,null,"Fine, whatever, I don't want to use Gatsby's version of ES Lint plugins or TypeScript plugins. It's my site, not\na Gatsby commit that I'm writing changes for. Okay, I'll ignore these errors."),"\n",a.createElement(n.hr),"\n",a.createElement(n.ol,{start:"4"},"\n",a.createElement(n.li,null,"Get yelled at about vulnerabilities"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"14 moderate severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n")),"\n",a.createElement(n.p,null,"Yep:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ npm audit fix\n")),"\n",a.createElement(n.p,null,"There are still 12 moderate severity vulnerabilities."),"\n",a.createElement(n.p,null,"Okay, still a ton of warnings that I don't need to actually care about, but will need to read each time I revisit\nMy site's dependencies."),"\n",a.createElement(n.p,null,"Fun stuff."),"\n",a.createElement(n.hr),"\n",a.createElement(n.ol,{start:"5"},"\n",a.createElement(n.li,null,"Does the app build now, though?"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ npm run build # (this is my script for a `gatsby build`, per their framework behavior)\n\n...build output...\n\n_Multiple instances of_:\n\n ERROR  UNKNOWN\n\n(node:12600) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n\n...build output...\n")),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,"Shit, why?")),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ npx npm-why punycode\n")),"\n",a.createElement(n.p,null,"Oh, okay. 3106 lines of output. Each Gatsby dependency I leverage consumes ",a.createElement(n.code,null,"punycode")," through its dependencies.\nNice."),"\n",a.createElement(n.h4,null,"Considering My Options"),"\n",a.createElement(n.p,null,"At this point, I'm regretting having gone down the mental road of choosing \"dev friendliness\" over site stability\nand maintenance. By not owning Gatsby, I have the luxury of simply using its features, but I also have the side-effect\nof not having any control over my own developer experience or my own site's stability in real time."),"\n",a.createElement(n.p,null,"I can't tell if I'm happy about this realization, or nervous that I've become one of ",a.createElement(n.em,null,"them"),":"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://news.ycombinator.com/item?id=38126210"},"Why You Should Write Your Own Static Site Generator")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://news.ycombinator.com/item?id=28837760"},"Why I built my own static site generator")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://news.ycombinator.com/item?id=25227181"},"I Built My Own Shitty Static Site Generator")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://news.ycombinator.com/item?id=24760528"},"Show HN: Blades - fast static site generator written in Rust")),"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://news.ycombinator.com/item?id=37454853"},'"Make" as a static site generator')),"\n"),"\n",a.createElement(n.h2,null,"In The End"),"\n",a.createElement(n.p,null,'I can continue relying on Gatsby for super easy minor updates to my web pages. I cannot rely on it for the very\n"magic" that turned me on to it: A simple SSG that offers a great dev experience.'),"\n",a.createElement(n.p,null,"When my own developer configs\ncreate endless warnings and errors from the most essential part of Gatsby: its position in the JavaScript ecosystem,\nI can't help but feel it has lost its edge. I drank the Kool Aid. Now I have a belly ache."),"\n",a.createElement(n.hr),"\n",a.createElement(n.hr),"\n",a.createElement(n.h5,null,"P.S."),"\n",a.createElement(n.p,null,'This ended up being my first blog post in a while, and one that includes a lot of nested code blocks.\nTo improve readability, I wanted to adopt syntax highlighting and a background color for contrast against "normal\ntext". There was an update that was at one point compatible with ',a.createElement(n.code,null,"gatsby-plugin-mdx")," via ",a.createElement(n.code,null,"gatsby-remark-highlight-code"),"\nthat now breaks with the latest version of Gatsby (",a.createElement(n.code,null,"5.13.0")," at time of writing). The workarounds include:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Using the MDX rehype-highlight library directly, and injecting it into the ",a.createElement(n.code,null,"gatsby-plugin-mdx")," ",a.createElement(n.code,null,"options.rehypePlugins"),"\nfield"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"This now requires ",a.createElement(n.code,null,'require("rehype-highlight")'),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"This is no longer compatible with the latest version of Gatsby, and these workarounds break:","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Asynchronously promise the Gatsby module config to dynamically ",a.createElement(n.code,null,"import rehypeHighlight"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"(breaks the Gatsby config import entirely)"),"\n"),"\n"),"\n",a.createElement(n.li,null,"Using babel to create gatsby-config.js as a module","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"(breaks the GraphQL library during build phase)"),"\n"),"\n"),"\n"),"\n"),"\n"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Writing an entire MDX parser to look for code blocks, and apply custom CSS"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"This can employ the help of other libraries, like Prism, to do the styling"),"\n",a.createElement(n.li,null,"If this were started, why stop? Why not extend the parsing to a larger engine? It could be some sort of content parser\nplus content renderer. It could generate content based on some templated files. It could create an entire static site\nbased on the contents of a folder..."),"\n"),"\n"),"\n"),"\n",a.createElement(n.p,null,"Oh..."))}var o=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.RP)(),e.components);return n?a.createElement(n,e,a.createElement(r,e)):r(e)},i=t(1633),s=t(5999);const c=e=>{let{data:n,children:t}=e;return a.createElement(i.A,null,a.createElement("p",{className:s.p6},a.createElement("i",null,n.mdx.frontmatter.date),a.createElement("br",null),n.mdx.frontmatter.updated&&a.createElement("i",null,"(Updated on ",n.mdx.frontmatter.updated,")")),a.createElement("div",{className:s.bE},t))};function m(e){return a.createElement(c,e,a.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-pages-lines-mdx-fields-slug-tsx-content-file-path-blog-bye-gatsby-mdx-eab1592846524b4d7d94.js.map